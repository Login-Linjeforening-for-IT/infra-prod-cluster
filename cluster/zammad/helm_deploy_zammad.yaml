## https://github.com/zammad/zammad-helm/blob/main/zammad/values.yaml
---
apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: zammad-prod
  namespace: zammad
spec:
  interval: 5m
  chart:
    spec:
      chart: zammad
      version: "12.3.2"
      sourceRef:
        kind: HelmRepository
        name: helm-repo
        namespace: zammad
      interval: 5m
  values:
    secrets:
      postgresql:
        useExisting: true
        secretName: zammad-db-credentials
        secretKey: password
    ingress:
      enabled: true
      ingressClassName: nginx-ntnu
      annotations:
        nginx.ingress.kubernetes.io/proxy-read-timeout: "3600"
        nginx.ingress.kubernetes.io/proxy-send-timeout: "3600"
        nginx.ingress.kubernetes.io/upgrade-proxy: "true"
        nginx.ingress.kubernetes.io/enable-websockets: "true"
      tls:
        - hosts:
            - zammad-test.login.no
      hosts:
        - host: zammad-test.login.no
          paths:
            - path: "/"
              pathType: Prefix
    zammadConfig:
      postgresql:
        enabled: false
        db: zammad
        host: zammad-psql-rw.zammad.svc.cluster.local
        user: zammad
        pass: "123"
        port: "5432"
      redis:
        enabled: true
      elasticsearch:
        enabled: true
      memcached:
        enabled: true
      minio:
        enabled: false

