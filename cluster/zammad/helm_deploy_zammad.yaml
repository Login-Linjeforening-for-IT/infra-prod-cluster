---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: zammad-prod
  namespace: zammad
spec:
  interval: 10m
  chart:
    spec:
      chart: zammad
      version: "10.0.0"
      sourceRef:
        kind: HelmRepository
        name: helm-repo
        namespace: zammad
      interval: 5m
  values:
    ingress:
      enabled: true
      ingressClassName: nginx-ntnu
      annotations:
        nginx.ingress.kubernetes.io/proxy-read-timeout: "3600"
        nginx.ingress.kubernetes.io/proxy-send-timeout: "3600"
        nginx.ingress.kubernetes.io/upgrade-proxy: "true"
        nginx.ingress.kubernetes.io/enable-websockets: "true"
      tls:
        - hosts:
            - zammad-test.login.no
      hosts:
        - host: zammad-test.login.no
          paths:
            - path: "/"
              pathType: Prefix