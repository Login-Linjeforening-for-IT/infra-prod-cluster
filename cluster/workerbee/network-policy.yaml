# ---
# apiVersion: networking.k8s.io/v1
# kind: NetworkPolicy
# metadata:
#   name: deny-all
#   namespace: workerbee
# spec:
#   podSelector: {}
#   policyTypes:
#     - Ingress
#     - Egress

# ---
# apiVersion: networking.k8s.io/v1
# kind: NetworkPolicy
# metadata:
#   name: allow-ingress-dns
#   namespace: workerbee
# spec:
#   podSelector:
#     matchLabels:
#       app: workerbee
#   policyTypes:
#     - Ingress
#     - Egress
#   ingress:
#     - from:
#         - namespaceSelector:
#             matchLabels:
#               kubernetes.io/metadata.name: nginx-ingress-external
#       ports:
#         - port: 3000
#           protocol: TCP
#   egress:
#     - to:
#         - namespaceSelector: {}
#           podSelector:
#             matchLabels:
#               k8s-app: kube-dns
#       ports:
#         - protocol: UDP
#           port: 53
#     - to:
#         - namespaceSelector:
#             matchLabels:
#               kubernetes.io/metadata.name: workerbee
#           podSelector:
#             matchLabels:
#               cnpg.io/cluster: workerbee-psql
#       ports:
#         - protocol: TCP
#           port: 5432
#     - to:
#         - ipBlock:
#             cidr: 0.0.0.0/0
#             except:
#               - 10.0.0.0/8
#               - 192.168.0.0/16
#               - 172.16.0.0/12
#       ports:
#         - protocol: TCP
#           port: 443

# ---
# apiVersion: networking.k8s.io/v1
# kind: NetworkPolicy
# metadata:
#   name: allow-psql
#   namespace: workerbee
# spec:
#   policyTypes:
#     - Ingress
#     - Egress
#   podSelector:
#     matchLabels:
#       cnpg.io/cluster: workerbee-psql
#   ingress:
#     - {}
#   egress:
#     - {}


# # Allowing egress workerbee to uptime-kuma traffic
# ---
# apiVersion: networking.k8s.io/v1
# kind: NetworkPolicy
# metadata:
#   name: allow-workerbee-to-uptime-kuma
#   namespace: workerbee
# spec:
#   podSelector:
#     matchLabels:
#       app: workerbee
#   policyTypes:
#     - Egress
#   egress:
#     - to:
#         - namespaceSelector:
#             matchLabels:
#               kubernetes.io/metadata.name: uptime-kuma
#           podSelector:
#             matchLabels:
#               app: uptime-kuma
#       ports:
#         - protocol: TCP
#           port: 3001
